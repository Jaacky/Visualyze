<nav class="<% if (typeof landing === 'undefined') { %>active<% } %>">
    <div class="nav-container">
        <div class="nav-header">
            <div class="nav-brand"><a class="brand" href="/">VISUALYZE</a></div>
        </div><!--
        --><div class="nav-menu">
            <ul class="">
                <% if (typeof user !== 'undefined') { %>
                    <li><a href="/dashboard">Dashboard</a></li>
                    <li><a href="#"><%= user.email %></a></li>
                    <li class="nav-dropdown active">
                        <a href="#">Requests</a>
                        <div id="request-dropdown" class="dropdown active">
                            <ul>
                                <li>No requests.</li>
                            </ul>
                        </div>
                    </li>
                    <span class="nav-divider">/</span>
                    <li><a href="/logout">Logout</a></li>
                <% } else { %>
                    <li class="btn-login"><a href="/login">Login</a></li>
                <% } %>
            </ul>
        </div>
    </div>
</nav>

<script>

    $(document).ready(function() {
        $('.nav-dropdown > a').on('click', function() {
            var self = $(this);
            self.parent().toggleClass('active');
            self.siblings('.dropdown').toggleClass('active');
        });
    });

    var socket = io();

    socket.on('connection', function(msg) {
        console.log(msg);
    });
    socket.on('fusion request', function(msg) {
        console.log(msg);
        socket.emit('fusion request', 'from client');
    });
    socket.on('notify', function(msg) {
        console.log(msg);
    });
</script>